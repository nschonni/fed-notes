{% extends '../base.njk' %}

{# Intro content #}
{% set introHeading = title %}
{% set introSummary %}
<p>
  {% if date %}
    <time datetime="{{ date | isoDateFilter }}" class="dt-published">{{ date | displayDateFilter }}</time>
  {% endif %}
  <span>â€” {{ content | readingTime }} minute read</span>
</p>
{% endset %}

{# Post content #}
{% set previousPost = collections.posts | getPreviousCollectionItem(page) %}
{% set nextPost = collections.posts | getNextCollectionItem(page) %}

{% block content %}
    <article>
      {% include "partials/intro.njk" %}
      <div class="container">
        <div class="article-content__wrapper">
          <div class="sidebar-content">
              <div class="toc" aria-hidden="true">
                <h2 class="toc__header">On this page</h4>
                <div class="toc__content">{{ content | onlyToC | safe }}</div>
            </div>
          </div>
          <div class="article-content" >
            <div class="article-body">
              {{ content | noToC | safe }}
            </div>
            {% footnotes %}
            <div class="next-and-prev">
              <ul>
                {% if nextPost %}
                  <li class="next"><a href="{{ nextPost.url }}" class="button button--secondary"><span class="visually-hidden">Next: </span>{{ nextPost.data.title }}</a></li>
                {% endif %}

                {% if previousPost %}
                  <li class="prev"><a href="{{ previousPost.url }}" class="button button--secondary"><span class="visually-hidden">Previous: </span>{{ previousPost.data.title }}</a></li>
                {% endif %}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </article>
    {% include "partials/subscribe.njk" %}

{% endblock %}

{% block scripts %}
  <script src="{{ '/js/script.js' | url }}" defer></script>
{% endblock %}
